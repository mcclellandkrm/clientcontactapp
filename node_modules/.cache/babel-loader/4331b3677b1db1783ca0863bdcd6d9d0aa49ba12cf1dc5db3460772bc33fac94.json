{"ast":null,"code":"var _jsxFileName = \"D:\\\\01_VSCODE\\\\clientcontactapp\\\\src\\\\App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport emailjs from 'emailjs-com';\nimport ClientForm from './components/ClientForm';\nimport EmailSelector from './components/EmailSelector';\nimport SendEmailButton from './components/SendEmailButton';\nimport { emailTemplates } from './emailTemplates';\nimport { supabase } from './supabaseClient'; // Make sure this file exports your Supabase client\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const [clientDetails, setClientDetails] = useState(null);\n  const [selectedTemplateId, setSelectedTemplateId] = useState('');\n  const selectedTemplate = emailTemplates.find(t => t.id === selectedTemplateId);\n\n  // Helper to fill template with client info\n  const fillTemplate = template => {\n    if (!clientDetails) return template;\n    return template.replace('{{name}}', clientDetails.first_name || '').replace('{{business}}', clientDetails.business_name || '');\n  };\n  const handleClientDetailsChange = details => {\n    setClientDetails(details);\n  };\n  const handleEmailTemplateChange = templateId => {\n    setSelectedTemplateId(templateId);\n  };\n  const handleSendEmail = async () => {\n    if (clientDetails && selectedTemplateId && selectedTemplate) {\n      // 1. Send email\n      try {\n        await emailjs.send(\"service_02yclcc\", selectedTemplateId, {\n          to_name: clientDetails.first_name,\n          to_email: clientDetails.business_email,\n          message: fillTemplate(selectedTemplate.body),\n          subject: selectedTemplate.subject\n          // Add other variables as needed by your EmailJS template\n        });\n        console.log('Email sent');\n\n        // 2. Store record in Supabase\n        const {\n          error\n        } = await supabase.from('clientcontact').insert([{\n          business_name: clientDetails.business_name,\n          contact_name: clientDetails.contact_name,\n          first_name: clientDetails.first_name,\n          business_email: clientDetails.business_email,\n          telephone: clientDetails.telephone,\n          notes: clientDetails.notes,\n          business_type: clientDetails.business_type\n        }]);\n        if (error) {\n          console.error('Supabase error:', error.message);\n        } else {\n          console.log('Record saved to Supabase');\n        }\n      } catch (error) {\n        console.error('Email or Supabase error:', error.text || error.message);\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Client Introduction App\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ClientForm, {\n      onChange: handleClientDetailsChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(EmailSelector, {\n      onSelect: handleEmailTemplateChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this), selectedTemplate && clientDetails && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        border: '1px solid #ccc',\n        padding: '1em',\n        margin: '1em 0'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Preview\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Subject:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }, this), \" \", selectedTemplate.subject, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 73\n      }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Body:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n        children: fillTemplate(selectedTemplate.body)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(SendEmailButton, {\n      onSendEmail: handleSendEmail,\n      clientDetails: clientDetails,\n      selectedTemplate: selectedTemplate\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 9\n  }, this);\n};\n_s(App, \"+W0sij/UpNSjrnSvec/9YO+dCfc=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","emailjs","ClientForm","EmailSelector","SendEmailButton","emailTemplates","supabase","jsxDEV","_jsxDEV","App","_s","clientDetails","setClientDetails","selectedTemplateId","setSelectedTemplateId","selectedTemplate","find","t","id","fillTemplate","template","replace","first_name","business_name","handleClientDetailsChange","details","handleEmailTemplateChange","templateId","handleSendEmail","send","to_name","to_email","business_email","message","body","subject","console","log","error","from","insert","contact_name","telephone","notes","business_type","text","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","onSelect","style","border","padding","margin","onSendEmail","_c","$RefreshReg$"],"sources":["D:/01_VSCODE/clientcontactapp/src/App.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport emailjs from 'emailjs-com';\nimport ClientForm from './components/ClientForm';\nimport EmailSelector from './components/EmailSelector';\nimport SendEmailButton from './components/SendEmailButton';\nimport { emailTemplates } from './emailTemplates';\nimport { ClientDetails } from './types';\nimport { supabase } from './supabaseClient'; // Make sure this file exports your Supabase client\n\nconst App: React.FC = () => {\n    const [clientDetails, setClientDetails] = useState<ClientDetails | null>(null);\n    const [selectedTemplateId, setSelectedTemplateId] = useState<string>('');\n\n    const selectedTemplate = emailTemplates.find(t => t.id === selectedTemplateId);\n\n    // Helper to fill template with client info\n    const fillTemplate = (template: string) => {\n        if (!clientDetails) return template;\n        return template\n            .replace('{{name}}', clientDetails.first_name || '')\n            .replace('{{business}}', clientDetails.business_name || '');\n    };\n\n    const handleClientDetailsChange = (details: ClientDetails) => {\n        setClientDetails(details);\n    };\n\n    const handleEmailTemplateChange = (templateId: string) => {\n        setSelectedTemplateId(templateId);\n    };\n\n    const handleSendEmail = async () => {\n        if (clientDetails && selectedTemplateId && selectedTemplate) {\n            // 1. Send email\n            try {\n                await emailjs.send(\n                    \"service_02yclcc\",\n                    selectedTemplateId,\n                    {\n                        to_name: clientDetails.first_name,\n                        to_email: clientDetails.business_email,\n                        message: fillTemplate(selectedTemplate.body),\n                        subject: selectedTemplate.subject,\n                        // Add other variables as needed by your EmailJS template\n                    }\n                );\n                console.log('Email sent');\n\n                // 2. Store record in Supabase\n                const { error } = await supabase.from('clientcontact').insert([{\n                    business_name: clientDetails.business_name,\n                    contact_name: clientDetails.contact_name,\n                    first_name: clientDetails.first_name,\n                    business_email: clientDetails.business_email,\n                    telephone: clientDetails.telephone,\n                    notes: clientDetails.notes,\n                    business_type: clientDetails.business_type\n                }]);\n                if (error) {\n                    console.error('Supabase error:', error.message);\n                } else {\n                    console.log('Record saved to Supabase');\n                }\n            } catch (error: any) {\n                console.error('Email or Supabase error:', error.text || error.message);\n            }\n        }\n    };\n\n    return (\n        <div>\n            <h1>Client Introduction App</h1>\n            <ClientForm onChange={handleClientDetailsChange} />\n            <EmailSelector onSelect={handleEmailTemplateChange} />\n            {/* Email Preview */}\n            {selectedTemplate && clientDetails && (\n                <div style={{border: '1px solid #ccc', padding: '1em', margin: '1em 0'}}>\n                    <h2>Preview</h2>\n                    <strong>Subject:</strong> {selectedTemplate.subject}<br />\n                    <strong>Body:</strong>\n                    <pre>{fillTemplate(selectedTemplate.body)}</pre>\n                </div>\n            )}\n            <SendEmailButton\n              onSendEmail={handleSendEmail}\n              clientDetails={clientDetails}\n              selectedTemplate={selectedTemplate}\n            />\n        </div>\n    );\n};\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}